# Hyperforge Frontend Architecture

## Overview

A frontend for hyperforge should embrace the **event-streaming hub architecture**. Rather than request/response REST calls, the frontend subscribes to event streams from hub methods and renders state changes in real-time.

## Design Principles

### 1. Stream-First UI

Every hub method returns a stream of events. The frontend should:
- Render events as they arrive (not wait for completion)
- Show progress for long operations (sync, converge, import)
- Accumulate state from event sequences

```
User Action â†’ Hub Method â†’ Event Stream â†’ UI Updates
                              â†“
                     [Event 1] â†’ render
                     [Event 2] â†’ render
                     [Event 3] â†’ render
                     [Complete] â†’ final state
```

### 2. Declarative State Visualization

The core value prop is visualizing the three-way state:
- **Desired** (repos.yaml) - what user wants
- **Synced** (_synced) - what Pulumi has created
- **Discovered** (_discovered) - what exists on forges

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  substrate                                    [SYNCED]  â”‚
â”‚  â”œâ”€â”€ Desired: github, codeberg                          â”‚
â”‚  â”œâ”€â”€ Synced:  github âœ“, codeberg âœ“                      â”‚
â”‚  â””â”€â”€ Remote:  github âœ“, codeberg âœ“                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  new-project                                [TO CREATE] â”‚
â”‚  â”œâ”€â”€ Desired: github, codeberg                          â”‚
â”‚  â”œâ”€â”€ Synced:  (none)                                    â”‚
â”‚  â””â”€â”€ Remote:  (none)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  orphan-repo                               [UNTRACKED]  â”‚
â”‚  â”œâ”€â”€ Desired: (not in config)                           â”‚
â”‚  â”œâ”€â”€ Synced:  (none)                                    â”‚
â”‚  â””â”€â”€ Remote:  github âœ“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Operation-Centric Navigation

Structure around what users do, not data hierarchy:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Organizations] [Workspaces] [Operations]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  Active Operation: repos.converge            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Phase: apply (3/5)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âœ“ refresh    discovered 15 repos       â”‚  â”‚
â”‚  â”‚ âœ“ diff       create=2, update=1        â”‚  â”‚
â”‚  â”‚ â—‰ apply      substrate (creating...)   â”‚  â”‚
â”‚  â”‚ â—‹ capture                              â”‚  â”‚
â”‚  â”‚ â—‹ verify                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  Event Log:                                  â”‚
â”‚  12:00:01 RefreshProgress github: 15 repos   â”‚
â”‚  12:00:02 RefreshProgress codeberg: 12 repos â”‚
â”‚  12:00:03 DiffResult substrate: in_sync      â”‚
â”‚  12:00:04 DiffResult new-proj: to_create     â”‚
â”‚  12:00:05 PulumiOutput + github:repo substrateâ”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture Options

### Option A: TUI (Terminal User Interface)

**Technology**: Rust with `ratatui` or Haskell with `brick`

**Pros**:
- Native integration with substrate WebSocket
- No browser overhead
- Keyboard-driven workflow fits developer UX
- Can embed in terminal multiplexer

**Cons**:
- Limited graphics/layout
- Steeper learning curve for complex interactions

**Structure**:
```
hyperforge-tui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ app.rs              # Application state
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ dashboard.rs    # Main view
â”‚   â”‚   â”œâ”€â”€ org_list.rs     # Organization browser
â”‚   â”‚   â”œâ”€â”€ repo_diff.rs    # Three-way diff view
â”‚   â”‚   â”œâ”€â”€ event_log.rs    # Streaming events
â”‚   â”‚   â””â”€â”€ operation.rs    # Active operation progress
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ handler.rs      # Keyboard/mouse events
â”‚   â”‚   â””â”€â”€ hub_events.rs   # Hub event processing
â”‚   â””â”€â”€ client/
â”‚       â”œâ”€â”€ mod.rs
â”‚       â””â”€â”€ websocket.rs    # Substrate connection
â””â”€â”€ Cargo.toml
```

**Key Components**:

```rust
// app.rs - Core state
pub struct App {
    // Connection
    substrate: SubstrateClient,

    // Cached state
    orgs: Vec<OrgSummary>,
    current_org: Option<String>,
    repos: HashMap<String, RepoState>,

    // Active operation
    operation: Option<ActiveOperation>,
    event_log: VecDeque<HubEvent>,

    // UI state
    focus: Focus,
    scroll: usize,
}

pub struct RepoState {
    config: RepoConfig,
    synced: Option<SyncedState>,
    discovered: Option<DiscoveredState>,
    diff_status: DiffStatus,
}

pub struct ActiveOperation {
    method: String,
    started: Instant,
    phases: Vec<Phase>,
    current_phase: usize,
    events: Vec<HubEvent>,
}
```

```rust
// client/websocket.rs - Hub integration
impl SubstrateClient {
    pub async fn call(&self, method: &str, params: Value) -> EventStream {
        // Returns async stream of events
    }

    pub async fn subscribe(&self, path: &str) -> EventStream {
        // Subscribe to hub namespace for schema/status
    }
}
```

### Option B: Web Frontend (SPA)

**Technology**: TypeScript with SolidJS or Svelte (reactive, small bundle)

**Pros**:
- Rich UI capabilities
- Familiar web development
- Easy to style and customize
- Accessible from any device

**Cons**:
- Requires separate server or embedded in substrate
- More complex deployment

**Structure**:
```
hyperforge-web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ substrate.ts     # WebSocket client
â”‚   â”‚   â”œâ”€â”€ events.ts        # Event type definitions
â”‚   â”‚   â””â”€â”€ stores.ts        # Reactive state stores
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ OrgSelector.tsx
â”‚   â”‚   â”œâ”€â”€ RepoList.tsx
â”‚   â”‚   â”œâ”€â”€ RepoDiff.tsx     # Three-way state view
â”‚   â”‚   â”œâ”€â”€ EventStream.tsx  # Real-time event log
â”‚   â”‚   â”œâ”€â”€ OperationProgress.tsx
â”‚   â”‚   â””â”€â”€ SecretManager.tsx
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ Home.tsx
â”‚       â”œâ”€â”€ Organization.tsx
â”‚       â””â”€â”€ Settings.tsx
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

**Key Components**:

```typescript
// lib/substrate.ts - WebSocket client
export class SubstrateClient {
  private ws: WebSocket;

  async call(method: string, params: object): AsyncIterable<HubEvent> {
    // Send JSON-RPC request, yield events as they arrive
  }

  async schema(namespace: string): Promise<PluginSchema> {
    // Get schema for autocomplete/validation
  }
}

// lib/stores.ts - Reactive state (SolidJS example)
export const [orgs, setOrgs] = createSignal<OrgSummary[]>([]);
export const [currentOrg, setCurrentOrg] = createSignal<string | null>(null);
export const [repos, setRepos] = createStore<Record<string, RepoState>>({});
export const [activeOp, setActiveOp] = createSignal<ActiveOperation | null>(null);
export const [events, setEvents] = createSignal<HubEvent[]>([]);
```

```tsx
// components/RepoDiff.tsx - Three-way state visualization
function RepoDiff({ repo }: { repo: RepoState }) {
  const status = () => {
    if (!repo.synced && !repo.discovered) return 'to_create';
    if (repo.synced && repo.discovered) return 'synced';
    if (repo.discovered && !repo.config) return 'untracked';
    return 'to_update';
  };

  return (
    <div class={`repo-card ${status()}`}>
      <h3>{repo.config.name}</h3>
      <div class="state-columns">
        <StateColumn title="Desired" state={repo.config.forges} />
        <StateColumn title="Synced" state={repo.synced?.forges} />
        <StateColumn title="Remote" state={repo.discovered?.forges} />
      </div>
      <StatusBadge status={status()} />
    </div>
  );
}
```

### Option C: Hybrid (TUI + Web Inspector)

Run TUI for daily operations, web UI for visualization/debugging.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Terminal (TUI)           â”‚ Browser (Web Inspector)      â”‚
â”‚                          â”‚                              â”‚
â”‚ $ hf-tui                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Event Stream             â”‚ â”‚
â”‚ â”‚ orgs: hypermemetic   â”‚ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚ repos: 15 synced     â”‚ â”‚ â”‚ 12:00:01 RepoEvent...   â”‚ â”‚
â”‚ â”‚ staged: 2 pending    â”‚ â”‚ â”‚ 12:00:02 PulumiEvent... â”‚ â”‚
â”‚ â”‚                      â”‚ â”‚ â”‚ 12:00:03 RepoEvent...   â”‚ â”‚
â”‚ â”‚ > repos.converge     â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80%   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ State Inspector          â”‚ â”‚
â”‚                          â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚                          â”‚ â”‚ { "repos": { ... } }     â”‚ â”‚
â”‚                          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Core UI Patterns

### 1. Event Stream Panel

Always-visible panel showing hub events in real-time:

```
â”Œâ”€ Event Stream â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [filter: all â–¼] [pause â¸] [clear ğŸ—‘]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 12:00:05 repo.synced         substrate â†’ github        â”‚
â”‚ 12:00:04 pulumi.resource     + github:repo substrate   â”‚
â”‚ 12:00:03 repo.sync_progress  substrate: pulumi         â”‚
â”‚ 12:00:02 repo.sync_started   org=hypermemetic, n=1     â”‚
â”‚ 12:00:01 converge.phase      apply: started            â”‚
â”‚ 12:00:00 converge.started    phases=[refresh,diff,...] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Diff View

Side-by-side comparison of desired vs actual:

```
â”Œâ”€ Diff: hypermemetic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  Repository      Desired         Actual        Status   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  substrate       gh,cb           gh,cb         âœ“ sync   â”‚
â”‚  hub-core        gh,cb           gh,cb         âœ“ sync   â”‚
â”‚  new-project     gh,cb           -             + create â”‚
â”‚  old-project     _delete         gh            - delete â”‚
â”‚  (untracked)     -               gh            ? import â”‚
â”‚                                                         â”‚
â”‚  Summary: 2 synced, 1 create, 1 delete, 1 untracked    â”‚
â”‚                                                         â”‚
â”‚  [Preview Changes] [Apply] [Import Untracked]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Operation Progress

Multi-phase operations with step-by-step progress:

```
â”Œâ”€ Operation: repos.converge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  âœ“ refresh     discovered 15 repos           [2.3s]    â”‚
â”‚  âœ“ diff        create=1, update=0, delete=0  [0.1s]    â”‚
â”‚  â—‰ apply       new-project (creating...)     [...]     â”‚
â”‚    â”œâ”€ pulumi preview                                   â”‚
â”‚    â”œâ”€ + github:repository new-project                  â”‚
â”‚    â””â”€ + codeberg:repository new-project                â”‚
â”‚  â—‹ capture                                             â”‚
â”‚  â—‹ verify                                              â”‚
â”‚                                                         â”‚
â”‚  Elapsed: 4.2s                     [Cancel]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Secret Manager

Secure handling with keychain integration:

```
â”Œâ”€ Secrets: hypermemetic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  Key              Provider    Status                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  github-token     keychain    âœ“ set                    â”‚
â”‚  codeberg-token   keychain    âœ“ set                    â”‚
â”‚  crates-token     keychain    â—‹ not set                â”‚
â”‚                                                         â”‚
â”‚  [Acquire from gh CLI] [Set Manually] [Refresh]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## WebSocket Protocol

The frontend connects to substrate via WebSocket and uses JSON-RPC 2.0:

### Request
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "hyperforge.org.hypermemetic.repos.converge",
  "params": { "dry_run": true }
}
```

### Streaming Response
```json
{ "jsonrpc": "2.0", "id": 1, "result": { "type": "converge_started", "phases": [...] } }
{ "jsonrpc": "2.0", "id": 1, "result": { "type": "converge_phase", "phase": "refresh", "status": "..." } }
{ "jsonrpc": "2.0", "id": 1, "result": { "type": "converge_phase", "phase": "diff", "status": "..." } }
{ "jsonrpc": "2.0", "id": 1, "result": { "type": "converge_complete", "success": true, ... } }
{ "jsonrpc": "2.0", "id": 1, "result": null }  // Stream end
```

### Schema Introspection
```json
// Request schema for autocomplete
{ "jsonrpc": "2.0", "id": 2, "method": "hyperforge", "params": { "_schema": true } }

// Response
{
  "jsonrpc": "2.0",
  "id": 2,
  "result": {
    "namespace": "hyperforge",
    "version": "2.0.0",
    "methods": [
      { "name": "status", "params": [], "description": "Show hyperforge status" },
      ...
    ],
    "children": [
      { "namespace": "org", "description": "Organization management" },
      { "namespace": "forge", "description": "Direct forge API access" },
      { "namespace": "workspace", "description": "Workspace bindings" }
    ]
  }
}
```

---

## Recommended Implementation

### Phase 1: TUI MVP

Build a minimal TUI that covers core workflows:

1. **Dashboard** - Show orgs, repo counts, sync status
2. **Org Browser** - List orgs, select active
3. **Repo List** - Show repos with diff status
4. **Event Log** - Stream events from operations
5. **Command Palette** - Quick access to hub methods

**Tech Stack**: Rust + `ratatui` + `tokio-tungstenite`

### Phase 2: Web Inspector

Add browser-based debugging/visualization:

1. **Event Inspector** - Detailed event payloads
2. **State Viewer** - JSON tree of current state
3. **Schema Browser** - Navigate hub schema
4. **Operation History** - Past operations with timings

**Tech Stack**: SolidJS + Vite (embedded in substrate or standalone)

### Phase 3: Full Web UI

If demand warrants, build full web management interface.

---

## File References

Related implementation files:
- `src/hub.rs` - HyperforgeHub root
- `src/events.rs` - All event type definitions
- `src/bridge/pulumi.rs` - PulumiEvent streaming
- `~/.hypermemetic-infra/plans/HUB/HUB-22.md` - Converge operation spec
